<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM 200 Calculator | Professional Fire Suppression System Design</title>
    <meta name="description" content="Professional calculation tool for FM 200 fire suppression system design. Calculate cylinder requirements, concentration levels, and system specifications.">
    
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”¥</text></svg>">
    
    <style>
        /* Inline critical CSS for faster loading */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }
        .spinner {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #ff4c4c;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
    </div>
    
    <div id="appNotification" class="notification"></div>

    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-fire-extinguisher"></i>
                    <h1>FM-200 Calculator</h1>
                    <span class="tagline">Professional System Design</span>
                    <div class="visitor-counter">
                        <i class="fas fa-eye"></i>
                        <span>Visitors: <span id="visitorCount">Loading...</span></span>
                    </div>
                </div>
                <div class="header-actions">
                    <button id="themeToggle" class="btn-icon"><i class="fas fa-moon"></i></button>
                </div>
            </div>
            <nav class="main-nav">
                <a href="index.html" class="active"><i class="fas fa-calculator"></i> Calculator</a>
                <a href="results.html"><i class="fas fa-chart-bar"></i> Results</a>
                <a href="quotation.html"><i class="fas fa-file-invoice"></i> Quotation</a>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="calculator-wrapper">
            <div class="panel input-panel">
                <div class="panel-header">
                    <div class="panel-icon"><i class="fas fa-cube"></i></div>
                    <h2>Room Details & Hazard Class</h2>
                </div>
                <form id="fm200Form">
                    <div class="form-section">
                        <h3>Project Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="project-name">Project Name</label>
                                <input type="text" id="project-name" placeholder="Server Room A-401" value="Server Room A-401">
                            </div>
                            <div class="form-group">
                                <label for="location">Location / Client</label>
                                <input type="text" id="location" placeholder="City, Country" value="Dubai, UAE">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h3>Room Dimensions (Meters)</h3>
                        <div class="form-row three-col">
                            <div class="form-group">
                                <label for="room-length">Length</label>
                                <input type="number" id="room-length" step="0.01" min="1" value="10.00" required>
                            </div>
                            <div class="form-group">
                                <label for="room-width">Width</label>
                                <input type="number" id="room-width" step="0.01" min="1" value="8.00" required>
                            </div>
                            <div class="form-group">
                                <label for="room-height">Height</label>
                                <input type="number" id="room-height" step="0.01" min="1" value="3.00" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Environmental & Design Parameters</h3>
                        <div class="form-row three-col">
                            <div class="form-group">
                                <label for="room-temperature">Design Temperature (Â°C)</label>
                                <input type="number" id="room-temperature" step="0.01" value="20.00" required>
                            </div>
                            <div class="form-group">
                                <label for="altitude">Altitude (m)</label>
                                <input type="number" id="altitude" step="1" value="0" required>
                            </div>
                            <div class="form-group">
                                <label for="hazard-class">Design Concentration (%)</label>
                                <input type="number" id="hazard-class" step="0.1" min="7.0" max="10.5" value="7.5" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="expert-toggle-section">
                        <label class="switch">
                            <input type="checkbox" id="expertModeToggle">
                            <span class="slider round"></span>
                        </label>
                        <span>Expert Mode (Advanced Safety Factors)</span>
                    </div>

                    <div id="expertModePanel" class="form-section expert-mode-panel">
                        <h3>Advanced Safety Factors</h3>
                        <div class="form-row three-col">
                            <div class="form-group">
                                <label for="altitude-factor">Altitude Safety Factor</label>
                                <input type="number" id="altitude-factor" step="0.01" value="1.10" readonly>
                            </div>
                            <div class="form-group">
                                <label for="high-temp-factor">High Temp. Safety Factor</label>
                                <input type="number" id="high-temp-factor" step="0.01" value="1.05" readonly>
                            </div>
                            <div class="form-group">
                                <label for="critical-area-factor">Critical Area Factor</label>
                                <input type="number" id="critical-area-factor" step="0.01" value="1.20" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="action-section">
                        <button type="submit" class="btn btn-primary"><i class="fas fa-forward"></i> Calculate System Requirements</button>
                        <button type="button" id="resetBtn" class="btn btn-secondary"><i class="fas fa-undo"></i> Reset</button>
                        <button type="button" id="saveBtn" class="btn btn-info"><i class="fas fa-save"></i> Save</button>
                    </div>
                </form>
            </div>

            <div class="panel preview-panel">
                <div class="panel-header">
                    <div class="panel-icon"><i class="fas fa-chart-area"></i></div>
                    <h2>Calculation Preview</h2>
                </div>
                
                <div class="preview-stats">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-ruler-combined"></i></div>
                        <div class="stat-info">
                            <p>Room Volume (V)</p>
                            <span id="displayVolume" class="stat-value">240.00 mÂ³</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-temperature-high"></i></div>
                        <div class="stat-info">
                            <p>Specific Volume (S)</p>
                            <span id="displaySpecificVolume" class="stat-value">0.1384 mÂ³/kg</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-percent"></i></div>
                        <div class="stat-info">
                            <p>Required Conc.</p>
                            <span id="displayConcentration" class="stat-value">7.5%</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-flask"></i></div>
                        <div class="stat-info">
                            <p>FM-200 Agent Mass</p>
                            <span id="displayAgentMass" class="stat-value">1734.00 kg</span>
                        </div>
                    </div>
                </div>

                <div class="info-box-wrapper">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <i class="fas fa-flask info-icon"></i>
                            <span class="info-title">What is FM-200?</span>
                            <i class="fas fa-chevron-down accordion-icon"></i>
                        </div>
                        <div class="accordion-content">
                            <p>FM-200 (Heptafluoropropane) is a clean agent fire suppression gas that is safe for occupied spaces. It suppresses fire by absorbing heat at the molecular level. It leaves no residue, making it ideal for protecting critical assets like server rooms and data centers.</p>
                        </div>
                    </div>
                    
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <i class="fas fa-balance-scale info-icon"></i>
                            <span class="info-title">NFPA 2001 Standard</span>
                            <i class="fas fa-chevron-down accordion-icon"></i>
                        </div>
                        <div class="accordion-content">
                            <p>This calculator is based on NFPA 2001, the Standard on Clean Agent Fire Extinguishing Systems. It calculates the required agent mass (W) using the formula: W = (V/S) * (C / (100-C)) * F, where V is Volume, S is Specific Volume, C is Concentration, and F is Safety Factor.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="disclaimer-section">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Disclaimer: This tool is for preliminary design purposes only. All calculations must be verified by a qualified fire protection engineer. FM-200Â® is a registered trademark of Chemours.</span>
        </div>
    </main>

    <div id="saveModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Save Calculation</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Your current calculation data (including room dimensions, results, and BOQ) will be saved locally in your browser.</p>
                <div class="form-group">
                    <label for="saveName">Save As:</label>
                    <input type="text" id="saveName" placeholder="My Server Room Project">
                </div>
                <button id="confirmSaveBtn" class="btn btn-primary">Confirm Save</button>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Send Feedback</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="feedbackForm">
                    <div class="form-group">
                        <label for="feedbackName">Your Name</label>
                        <input type="text" id="feedbackName" placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="feedbackEmail">Email Address</label>
                        <input type="email" id="feedbackEmail" placeholder="Enter your email">
                    </div>
                    <div class="form-group">
                        <label for="feedbackMessage">Message</label>
                        <textarea id="feedbackMessage" rows="4" placeholder="Your feedback or suggestions..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="feedbackType">Type of Feedback</label>
                        <select id="feedbackType">
                            <option value="suggestion">Suggestion</option>
                            <option value="bug">Bug Report</option>
                            <option value="feature">Feature Request</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Feedback</button>
                </form>
            </div>
        </div>
    </div>

    <footer class="main-footer">
        <div class="container">
            <div class="footer-details">
                <div class="footer-links">
                    <a href="https://www.amjathkhan.com/" target="_blank"><i class="fas fa-globe"></i> Website</a>
                    <a href="mailto:contact@amjathkhan.com"><i class="fas fa-envelope"></i> Email</a>
                    <a href="#" id="feedbackBtn"><i class="fas fa-comment"></i> Feedback</a>
                </div>
                <div class="contact-info">
                    <i class="fas fa-envelope"></i> contact@amjathkhan.com<br>
                    <i class="fas fa-phone"></i> +91-9750816163
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Fire Safety Tools. This tool provides budgetary estimates only. Final design must be performed by qualified fire protection engineers.</p>
                <div class="footer-disclaimer">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Disclaimer: This calculator is for preliminary estimation only. All calculations should be verified by certified professionals.</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- SIMPLIFIED SCRIPT SECTION - NO EXTERNAL DEPENDENCIES -->
    <script>
        // Simple feedback modal functionality
        document.addEventListener('DOMContentLoaded', function() {
            const feedbackBtn = document.getElementById('feedbackBtn');
            const feedbackModal = document.getElementById('feedbackModal');
            const closeModal = feedbackModal ? feedbackModal.querySelector('.close-modal') : null;
            
            if (feedbackBtn && feedbackModal && closeModal) {
                feedbackBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    feedbackModal.style.display = 'flex';
                });
                
                closeModal.addEventListener('click', function() {
                    feedbackModal.style.display = 'none';
                });
                
                window.addEventListener('click', function(e) {
                    if (e.target === feedbackModal) {
                        feedbackModal.style.display = 'none';
                    }
                });
                
                const feedbackForm = document.getElementById('feedbackForm');
                if (feedbackForm) {
                    feedbackForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        alert('Thank you for your feedback!');
                        feedbackForm.reset();
                        feedbackModal.style.display = 'none';
                    });
                }
            }
            
            // Simple save modal functionality
            const saveModal = document.getElementById('saveModal');
            if (saveModal) {
                const closeSaveModal = saveModal.querySelector('.close-modal');
                if (closeSaveModal) {
                    closeSaveModal.addEventListener('click', function() {
                        saveModal.style.display = 'none';
                    });
                }
                
                window.addEventListener('click', function(e) {
                    if (e.target === saveModal) {
                        saveModal.style.display = 'none';
                    }
                });
            }
        });
    </script>
    
    <!-- MAIN APPLICATION SCRIPT -->
    <script src="script.js"></script>
</body>
</html>
